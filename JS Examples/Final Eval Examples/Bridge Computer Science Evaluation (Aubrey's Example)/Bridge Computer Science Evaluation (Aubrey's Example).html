<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>repl.it</title>
	<link href="style.css" rel="stylesheet" type="text/css" />
	<script>
		function bridgeWeight() {
			var countP = 0;
			var countL = 0;
			var countS = 0;
			var bridge = document.getElementById("string").value

			var validLetters = ["P", "L", "S"]; // array of valid letters
			var validCount = 0;
			var invalidLettersString = "";
			var invalidCount = 0;
			var newBridge = "";
			var order = "";

			if (bridge.length == 0) { // if user leaves the input blank and clicks calculate, it will alert them to input something
				alert("Please enter something");
			}
			for (var i = 0; i < bridge.length; i++) {
				if (validLetters.includes(bridge.charAt(i))) { // if the array does match the character at the index of the string, it will add the character in that index to our new string
					newBridge = newBridge + bridge.charAt(i);
				} else { // a string of invalid characters, seperated by commas. It is flawed because it will add spaces, causing the output to look like (we removed,  , )
					invalidLettersString = invalidLettersString + ", " + bridge.charAt(i);
					invalidCount++;
				}
			}
			// tried to make the space more clear so did (space)
			invalidLettersString = invalidLettersString.replace(" ", "(space)")
			console.log("You had " + invalidCount + " invalid inputs. We've removed" + invalidLettersString + " from the string.")
			// counting amount of each object
			for (i = 0; i < bridge.length; i++) {
				if (bridge.charAt(i) == "P") {
					countP++;
				} else if (bridge.charAt(i) == "L") {
					countL++;
				} else if (bridge.charAt(i) == "S") {
					countS++;
				}
			}
			for (x = 0; x < countP; x++) {
				order += "P";
			}
			for (y = 0; y < countS; y++) {
				order += "S";
			}
			for (z = 0; z < countL; z++) {
				order += "L";
			}
			console.log("Your new updated string is: " + order);
			// amount of each object
			console.log("There are/is " + countP + " person/people.")
			console.log("There are/is " + countL + " large vehicle(s).")
			console.log("There are/is " + countS + " small vehicle(s).")
			// total amount of objects
			var totalObj = (countP + countL + countS);
			// getting the total number of vehicles
			var vehicleCount = (countL + countS)
			console.log("Vehicle count is: " + vehicleCount);

			// total weight and average weight load
			var weightP = countP * 80; // count of P mutiplied by its correspomding weight (80kg)
			var weightS = countS * 2000; // count of S mutiplied by its correspomding weight (2000kg)
			var weightL = countL * 36000; // count of L mutiplied by its correspomding weight (36000kg)
			console.log("Weight of P is: " + weightP + "kg");
			console.log("Weight of S is: " + weightS + "kg");
			console.log("Weight of L is: " + weightL + "kg");
			var totalWeight = (weightP + weightS + weightL) // total weight
			var averageWeightLoad = totalWeight / order.length; // average weight
			console.log("The average weight load is: " + averageWeightLoad + "kg");

			var guessWeightCap = document.getElementById("weight").value; // user's input for weight cap
			var guessMaxNumVehicle = document.getElementById("max").value; // user's input for max # of vehicles
			// if else statement to indicate either pass or fail, taking into account the amount of large vehicles being less than 10% of total vehicle count
			if (guessWeightCap >= totalWeight && guessMaxNumVehicle >= vehicleCount) {
				console.log("PASS");
			} else if (guessMaxNumVehicle < vehicleCount) {
				if (countL * 10 < vehicleCount && 0 < countL) {
					console.log("PASS")
				} else {
					console.log("FAIL");
				}
			} else {
				console.log("FAIL");
			}

			// table which includes object , the amount and its percentage
			document.getElementById("typePerson").innerHTML = "P ";
			document.getElementById("typeSmall").innerHTML = "S ";
			document.getElementById("typeLarge").innerHTML = "L ";
			document.getElementById("amountPerson").innerHTML = +countP;
			document.getElementById("amountSmall").innerHTML = +countS;
			document.getElementById("amountLarge").innerHTML = +countL;
			// divide object by total # of object, then multiply by 100 to get a value out of 100 (percentage)
			var percP = (countP / totalObj) * 100;
			var percS = (countS / totalObj) * 100;
			var percL = (countL / totalObj) * 100;
			document.getElementById("percentagePerson").innerHTML = +percP + "%";
			document.getElementById("percentageSmall").innerHTML = +percS + "%";
			document.getElementById("percentageLarge").innerHTML = +percL + "%";
		}

	</script>
</head>

<body>

	<h1>Bridge Census</h1>
	Enter a string of Objects:<br>
	<input type="text" id="string"></input><br><br>
	Enter Weight Capacity:<br>
	<input type="text" id="weight"></input><br><br>
	Enter Maximum Number of Vehicles Allowed:<br>
	<input type="text" id="max"></input><br><br>

	<button onclick="bridgeWeight()">Calculate</button>
	<table border=1>
		<tr>
			<th>Object</td>
			<th>Amount</td>
			<th>Percentage</td>
		</tr>
		<tr>
			<td id="typePerson"></td>
			<td id="amountPerson"></td>
			<td id="percentagePerson"></td>
		</tr>
		<tr>
			<td id="typeSmall"></td>
			<td id="amountSmall"></td>
			<td id="percentageSmall"></td>
		</tr>
		<tr>
			<td id="typeLarge"></td>
			<td id="amountLarge"></td>
			<td id="percentageLarge"></td>
		</tr>
	</table>

</body>

</html>

p
